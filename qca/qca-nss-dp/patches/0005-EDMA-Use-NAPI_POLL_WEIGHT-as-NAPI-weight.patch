From 45092ca8b4f1348ff341c034493edd52730c17ad Mon Sep 17 00:00:00 2001
From: Robert Marko <robimarko@gmail.com>
Date: Thu, 20 May 2021 14:57:46 +0200
Subject: [PATCH 5/5] EDMA: Use NAPI_POLL_WEIGHT as NAPI weight

Currently a weight of 100 is used by the EDMA, according
to upstream max of 64 should be used and that is used for
almost any driver.

They also introduced NAPI_POLL_WEIGHT define which equals
to 64.

So use NAPI_POLL_WEIGHT as the weight.

Signed-off-by: Robert Marko <robimarko@gmail.com>
---
 hal/edma/edma_data_plane.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/hal/edma/edma_data_plane.c b/hal/edma/edma_data_plane.c
index dae97ce..c3b71fb 100644
--- a/hal/edma/edma_data_plane.c
+++ b/hal/edma/edma_data_plane.c
@@ -526,7 +526,7 @@ static int edma_register_netdevice(struct net_device *netdev, uint32_t macid)
 	 */
 	if (!edma_hw.napi_added) {
 		netif_napi_add(netdev, &edma_hw.napi, edma_napi,
-				EDMA_NAPI_WORK);
+				NAPI_POLL_WEIGHT);
 		/*
 		 * Register the interrupt handlers and enable interrupts
 		 */
-- 
2.31.1

